<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Welcome Push Notification</title>
<!-- Include Firebase JavaScript SDK -->
<script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-messaging.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBUFAVoduqZxkZB9LBGub32vzjZaZrs568",
    authDomain: "samartha-49ce6.firebaseapp.com",
    projectId: "samartha-49ce6",
    messagingSenderId: "622881387164",
    appId: "1:622881387164:web:ee793f418cff1fbd8ef359"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  const messaging = firebase.messaging();

  function requestNotificationPermission() {
    Notification.requestPermission().then(function(permission) {
      if (permission === 'granted') {
        console.log('Notification permission granted.');
        // Retrieve an FCM token to identify the device
        messaging.getToken().then(function(currentToken) {
          if (currentToken) {
            console.log('FCM Token:', currentToken);
            // Send the token to your server to associate it with the user
            // Example: sendTokenToServer(currentToken);
            
            // Send a welcome push notification to the user
            const notification = {
              title: 'Welcome to Our Website!',
              body: 'Thank you for subscribing to push notifications.'
            };
            const options = {
              // Add any additional options here
            };
            navigator.serviceWorker.ready.then(function(registration) {
              registration.showNotification(notification.title, {
                body: notification.body,
                ...options
              });
            });
          } else {
            console.log('No registration token available. Request permission to generate one.');
          }
        }).catch(function(err) {
          console.error('An error occurred while retrieving token. ', err);
        });
      } else {
        console.log('Notification permission denied.');
      }
    }).catch(function(err) {
      console.error('Unable to request permission for notifications.', err);
    });
  }
</script>
</head>
<body>
<h1>Welcome to Our Website!</h1>
<p>If you would like to receive push notifications, click the button below:</p>
<button onclick="requestNotificationPermission()">Enable Push Notifications</button>
</body>
</html>
